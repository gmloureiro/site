<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Cadastro de SDR ‚Äì INBOTIX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Cadastro de SDRs para o marketplace INBOTIX." />
  <link rel="icon" type="image/png" href="logo-inbotix.png" />

  <style>
    :root {
      --primary: #0f6fff;
      --primary-dark: #0050c8;
      --bg: #f5f7fb;
      --dark: #0f172a;
      --text: #1f2933;
      --muted: #6b7280;
      --border: #dbe2f0;
      --border-strong: #b8c6f5;
      --danger: #b91c1c;
      --success: #15803d;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #e0ecff 0, #f5f7fb 40%, #ffffff 100%);
      color: var(--text);
      min-height: 100vh;
    }

    a { color: inherit; text-decoration: none; }

    header {
      padding: 12px 16px;
      background: #ffffff;
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .header-left { display: flex; align-items: center; gap: 10px; }
    .header-left img { height: 32px; width: auto; }

    .header-title { font-size: 13px; color: var(--muted); }
    .header-title strong { display: block; font-size: 15px; color: var(--dark); }

    .header-right {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: flex-end;
    }

    .btn-header {
      border-radius: 999px;
      border: 1px solid rgba(15, 111, 255, 0.50);
      padding: 6px 12px;
      font-size: 11px;
      color: var(--primary-dark);
      background: #f0f5ff;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
    }

    main {
      max-width: 880px;
      margin: 20px auto 32px;
      padding: 0 16px 32px;
    }

    .card {
      background: #ffffff;
      border-radius: 20px;
      border: 1px solid var(--border);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
      padding: 16px 18px 20px;
    }

    .card-header {
      margin-bottom: 10px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 800;
      color: var(--dark);
      margin-bottom: 4px;
    }

    .card-subtitle {
      font-size: 12px;
      color: var(--muted);
      max-width: 65ch;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15, 111, 255, 0.10);
      border: 1px solid rgba(15, 111, 255, 0.45);
      color: var(--primary-dark);
      font-size: 11px;
      font-weight: 500;
      margin-bottom: 6px;
    }

    form {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px 12px;
    }

    @media (max-width: 720px) {
      .grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .form-label {
      font-size: 11px;
      color: var(--muted);
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .form-label span.hint {
      font-weight: 400;
      font-size: 10px;
      color: #9ca3af;
    }

    .form-control,
    .form-select {
      border-radius: 10px;
      border: 1px solid var(--border-strong);
      padding: 6px 8px;
      font-size: 11px;
      font-family: inherit;
      background: #ffffff;
      outline: none;
    }

    .form-control:focus,
    .form-select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.45);
    }

    .form-select[multiple] {
      min-height: 70px;
    }

    .inline {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
      font-size: 11px;
      color: var(--muted);
    }

    .inline label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      cursor: pointer;
    }

    .inline input[type="checkbox"] {
      width: 14px;
      height: 14px;
    }

    .form-footer {
      margin-top: 4px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
    }

    .btn-primary {
      border-radius: 999px;
      border: none;
      padding: 8px 18px;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #ffffff;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 14px 32px rgba(15, 111, 255, 0.7);
    }

    .btn-primary[disabled] {
      opacity: 0.7;
      cursor: default;
      box-shadow: none;
    }

    .form-hint {
      font-size: 10px;
      color: var(--muted);
      max-width: 42ch;
    }

    .alert {
      margin-top: 10px;
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 11px;
      display: none;
    }

    .alert.success {
      display: block;
      background: #ecfdf3;
      border: 1px solid rgba(34, 197, 94, 0.6);
      color: #166534;
    }

    .alert.error {
      display: block;
      background: #fef2f2;
      border: 1px solid rgba(239, 68, 68, 0.7);
      color: #b91c1c;
    }

    .small-link {
      font-size: 11px;
      color: var(--primary-dark);
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-left">
      <a href="https://inbotix.com.br" target="_blank" rel="noopener">
        <img src="logo-inbotix.png" alt="INBOTIX" />
      </a>
      <div class="header-title">
        <strong>Cadastro de SDR ‚Äì INBOTIX</strong>
        Preencha seus dados para entrar na base do marketplace de SDRs.
      </div>
    </div>
    <div class="header-right">
      <a href="sdr-lista.html" class="btn-header">üëÅ Ver vitrine de SDRs</a>
      <a href="sdr-ranking.html" class="btn-header">üèÜ Ver ranking</a>
      <a href="sdr-admin.html" class="btn-header">‚öô Admin</a>
    </div>
  </header>

  <main>
    <section class="card">
      <div class="card-header">
        <div class="pill">üß© Cadastro √∫nico ‚Äì INBOTIX Marketplace</div>
        <h1 class="card-title">Entre para o marketplace de SDRs da INBOTIX.</h1>
        <p class="card-subtitle">
          Este formul√°rio envia seus dados direto para a planilha oficial do marketplace.
          Depois o time da INBOTIX valida e libera seu perfil na vitrine e no ranking.
        </p>
      </div>

      <form id="sdr-form">
        <div class="grid">
          <div class="form-group">
            <label class="form-label" for="nome">
              Nome completo do SDR *
            </label>
            <input id="nome" class="form-control" type="text" required />
          </div>

          <div class="form-group">
            <label class="form-label" for="cidade">
              Cidade / Estado
              <span class="hint">Ex.: S√£o Paulo ‚Äì SP</span>
            </label>
            <input id="cidade" class="form-control" type="text" />
          </div>

          <div class="form-group">
            <label class="form-label" for="regioes">
              Regi√µes que voc√™ atende *
            </label>
            <select id="regioes" class="form-select" required>
              <option value="">Selecione...</option>
              <option>Brasil inteiro</option>
              <option>Sudeste</option>
              <option>Sul</option>
              <option>Nordeste</option>
              <option>Centro-Oeste</option>
              <option>Norte</option>
              <option>LATAM</option>
              <option>Europa</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="idiomas">
              Idiomas que voc√™ atende *
              <span class="hint">Selecione 1 ou mais (Ctrl/Cmd + clique)</span>
            </label>
            <select id="idiomas" class="form-select" multiple required>
              <option>Portugu√™s</option>
              <option>Espanhol</option>
              <option>Ingl√™s</option>
              <option>Franc√™s</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="tempo-exp">
              Tempo de experi√™ncia *
            </label>
            <select id="tempo-exp" class="form-select" required>
              <option value="">Selecione...</option>
              <option>J√∫nior</option>
              <option>Pleno</option>
              <option>S√™nior</option>
              <option>+5 anos</option>
              <option>+10 anos</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="nicho">
              Nichos de atua√ß√£o *
              <span class="hint">Ex.: SaaS, Ind√∫stria, Educa√ß√£o...</span>
            </label>
            <select id="nicho" class="form-select" multiple required>
              <option>SaaS</option>
              <option>Ind√∫stria</option>
              <option>Educa√ß√£o</option>
              <option>Sa√∫de</option>
              <option>Tecnologia</option>
              <option>Ag√™ncias de marketing</option>
              <option>Servi√ßos B2B</option>
              <option>Finan√ßas</option>
              <option>Imobili√°rio</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="tipos-empresa">
              Tipos de empresa que voc√™ atende *
            </label>
            <select id="tipos-empresa" class="form-select" multiple required>
              <option>PME</option>
              <option>Enterprise</option>
              <option>Startup</option>
              <option>Franquia</option>
              <option>E-commerce</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="canais">
              Canais que voc√™ opera *
            </label>
            <select id="canais" class="form-select" multiple required>
              <option>LinkedIn</option>
              <option>E-mail</option>
              <option>WhatsApp</option>
              <option>Telefone</option>
              <option>URA</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="telefone">
              Telefone
              <span class="hint">Opcional</span>
            </label>
            <input id="telefone" class="form-control" type="text" placeholder="(DDD) 00000-0000" />
          </div>

          <div class="form-group">
            <label class="form-label" for="whats">
              WhatsApp de trabalho *
            </label>
            <input id="whats" class="form-control" type="text" required placeholder="(DDD) 00000-0000" />
          </div>

          <div class="form-group">
            <label class="form-label" for="linkedin">
              URL do seu LinkedIn *
            </label>
            <input id="linkedin" class="form-control" type="url" required placeholder="https://www.linkedin.com/in/..." />
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">
            Stack INBOTIX
            <span class="hint">Requisito para entrar na vitrine e no ranking</span>
          </label>
          <div class="inline">
            <label>
              <input type="checkbox" id="usa-inbotix" />
              Eu utilizo a stack INBOTIX (New Dinbot, dados, WhatsApp etc.) nas minhas opera√ß√µes.
            </label>
          </div>
        </div>

        <div class="form-footer">
          <button type="submit" id="btn-submit" class="btn-primary">
            <span id="btn-text">Cadastrar SDR</span>
            <span id="btn-spinner" style="display:none;">‚è≥</span>
          </button>
          <p class="form-hint">
            Ao enviar, seus dados v√£o para a planilha oficial da INBOTIX.  
            O time valida o cadastro antes de liberar na vitrine.
          </p>
        </div>

        <div id="alert-success" class="alert success">
          ‚úÖ Cadastro enviado com sucesso! Em breve a equipe da INBOTIX entra em contato e libera seu perfil.
        </div>
        <div id="alert-error" class="alert error">
          ‚ö† Ocorreu um erro ao enviar seu cadastro. Tente novamente em alguns minutos.
        </div>
      </form>
    </section>
  </main>

  <script>
    // üëâ TROCAR PELA URL DO WEB APP DO APPS SCRIPT
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxaofFa3DONK-m9S8EyQZB-gf4FFy6cJ6xSH_Jz3ov2j6yKTbBH7hBz60zaBvtFPeLQ/exec';

    const form = document.getElementById('sdr-form');
    const btnSubmit = document.getElementById('btn-submit');
    const btnText = document.getElementById('btn-text');
    const btnSpinner = document.getElementById('btn-spinner');
    const alertSuccess = document.getElementById('alert-success');
    const alertError = document.getElementById('alert-error');

    function getMultiSelectValue(select) {
      return Array.from(select.selectedOptions)
        .map(o => o.value.trim())
        .filter(Boolean)
        .join(', ');
    }

    function cleanPhone(value) {
      return (value || '').replace(/\s+/g, ' ').trim();
    }

    async function submitSdr(event) {
      event.preventDefault();
      alertSuccess.style.display = 'none';
      alertError.style.display = 'none';

      // Campos
      const nome = document.getElementById('nome').value.trim();
      const cidade = document.getElementById('cidade').value.trim();
      const regioes = document.getElementById('regioes').value;
      const idiomas = getMultiSelectValue(document.getElementById('idiomas'));
      const tempoExp = document.getElementById('tempo-exp').value;
      const nicho = getMultiSelectValue(document.getElementById('nicho'));
      const tiposEmpresa = getMultiSelectValue(document.getElementById('tipos-empresa'));
      const canais = getMultiSelectValue(document.getElementById('canais'));
      const telefone = cleanPhone(document.getElementById('telefone').value);
      const whats = cleanPhone(document.getElementById('whats').value);
      const linkedin = document.getElementById('linkedin').value.trim();
      const usaInbotix = document.getElementById('usa-inbotix').checked;

      if (!nome || !regioes || !idiomas || !tempoExp || !nicho || !tiposEmpresa || !canais || !whats || !linkedin) {
        alertError.textContent = 'Preencha todos os campos obrigat√≥rios marcados com * antes de enviar.';
        alertError.style.display = 'block';
        return;
      }

      const payload = {
        nome,
        cidade,
        regioes,
        idiomas,
        tempo_exp: tempoExp,
        nicho,
        tipos_empresa: tiposEmpresa,
        canais,
        telefone,
        whats,
        linkedin,
        usa_inbotix: usaInbotix
      };

      btnSubmit.disabled = true;
      btnSpinner.style.display = 'inline';
      btnText.textContent = 'Enviando...';

      try {
        const resp = await fetch(WEB_APP_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            action: 'create_sdr',
            payload
          })
        });

        const data = await resp.json().catch(() => null);

        if (!resp.ok || !data || !data.ok) {
          console.error('Erro no retorno:', data);
          alertError.textContent = 'N√£o foi poss√≠vel salvar seu cadastro agora. Tente novamente mais tarde.';
          alertError.style.display = 'block';
        } else {
          alertSuccess.style.display = 'block';
          form.reset();
        }
      } catch (err) {
        console.error('Erro na requisi√ß√£o:', err);
        alertError.textContent = 'Falha de conex√£o ao enviar o cadastro. Verifique sua internet e tente de novo.';
        alertError.style.display = 'block';
      } finally {
        btnSubmit.disabled = false;
        btnSpinner.style.display = 'none';
        btnText.textContent = 'Cadastrar SDR';
      }
    }

    form.addEventListener('submit', submitSdr);
  </script>
</body>
</html>
